language: cpp

matrix:
    include:
        - os: linux
          dist: trusty
          sudo: required
          compiler: gcc
        - os: osx
          osx_image: xcode8
          compiler: gcc
        - os: osx
          osx_image: xcode8
          compiler: clang

before_install:
    - |
        if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
            brew update
            brew install premake
            brew install clang-format
        fi
    - |
        if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
            sudo apt-get -qq update -y
            sudo apt-get install premake4 -y
            sudo apt-get install  -y
            sudo ln -s /usr/bin/make /usr/bin/gmake
        fi

script:
    - premake4 gmake
    - cd build
    - make
    - cd release
    - ./sepia_test

after_script:
    - premake4 uninstall
